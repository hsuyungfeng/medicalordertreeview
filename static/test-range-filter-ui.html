<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ—¥æœŸ/æ•¸å€¼ç¯„åœç¯©é¸ UI æ¸¬è©¦ - Range Filter UI Test</title>
  <link rel="stylesheet" href="css/range-filter.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    .container { max-width: 1000px; margin: 0 auto; }
    h1 {
      color: white;
      text-align: center;
      margin-bottom: 30px;
      font-size: 28px;
    }
    .demo-section {
      background: white;
      border-radius: 8px;
      padding: 30px;
      margin-bottom: 20px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    .demo-section h2 {
      color: #333;
      margin-bottom: 20px;
      border-bottom: 2px solid #667eea;
      padding-bottom: 10px;
    }
    .controls {
      background: #f7fafc;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
    }
    .control-group {
      margin-bottom: 15px;
    }
    .control-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: #333;
    }
    button {
      padding: 10px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.2s;
      margin-right: 10px;
    }
    .btn-primary { background: #667eea; color: white; }
    .btn-primary:hover { background: #5568d3; }
    .btn-danger { background: #f56565; color: white; }
    .btn-danger:hover { background: #e53e3e; }
    .console {
      background: #1a202c;
      color: #68d391;
      font-family: 'Courier New', monospace;
      padding: 15px;
      border-radius: 6px;
      max-height: 250px;
      overflow-y: auto;
      font-size: 12px;
      margin-top: 20px;
    }
    .output {
      background: #f0fdf4;
      border-left: 4px solid #48bb78;
      padding: 15px;
      border-radius: 4px;
      margin-top: 15px;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ“… æ—¥æœŸ/æ•¸å€¼ç¯„åœç¯©é¸ UI å¢å¼·</h1>

    <!-- æ—¥æœŸç¯„åœé¸æ“‡å™¨æ¼”ç¤º -->
    <div class="demo-section">
      <h2>ğŸ“† æ—¥æœŸç¯„åœé¸æ“‡å™¨</h2>
      <p style="margin-bottom: 20px; color: #666;">æ”¯æŒæ‰‹å‹•è¼¸å…¥å’Œå¿«é€Ÿé è¨­ç¯„åœ</p>
      <div id="date-selector"></div>
      <div class="controls">
        <button class="btn-primary" onclick="showDateRange()">é¡¯ç¤ºé¸å®šç¯„åœ</button>
        <button class="btn-danger" onclick="resetDateRange()">é‡ç½®</button>
      </div>
      <div id="date-output"></div>
    </div>

    <!-- æ•¸å€¼ç¯„åœæ»‘å¡Šæ¼”ç¤º -->
    <div class="demo-section">
      <h2>ğŸšï¸ æ•¸å€¼ç¯„åœæ»‘å¡Š</h2>
      <p style="margin-bottom: 20px; color: #666;">æ”¯æŒæ»‘å¡Šå’Œç›´æ¥è¼¸å…¥çš„äº’å‹•å¼æ•¸å€¼é¸æ“‡</p>
      
      <div style="margin-bottom: 30px;">
        <h3 style="font-size: 14px; margin-bottom: 15px; color: #333;">ç¤ºä¾‹ 1: è¨ºç™‚é»æ•¸ (100-2000)</h3>
        <div id="points-slider"></div>
      </div>

      <div style="margin-bottom: 30px;">
        <h3 style="font-size: 14px; margin-bottom: 15px; color: #333;">ç¤ºä¾‹ 2: æ‚£è€…å¹´é½¡ (0-100)</h3>
        <div id="age-slider"></div>
      </div>

      <div class="controls">
        <button class="btn-primary" onclick="showAllRanges()">é¡¯ç¤ºæ‰€æœ‰ç¯„åœ</button>
        <button class="btn-danger" onclick="resetAllSliders()">é‡ç½®å…¨éƒ¨</button>
      </div>
      <div id="slider-output"></div>
    </div>

    <!-- å¯¦æ™‚æ—¥èªŒ -->
    <div class="demo-section">
      <h2>ğŸ“Š å¯¦æ™‚æ—¥èªŒ</h2>
      <div class="console" id="console"></div>
    </div>
  </div>

  <script src="js/range-filter-ui.js"></script>
  <script>
    let dateSelector = null;
    let pointsSlider = null;
    let ageSlider = null;
    const consoleLogs = [];

    const originalLog = console.log;
    console.log = function(...args) {
      originalLog.apply(console, args);
      consoleLogs.push(args.join(' '));
      updateConsole();
    };

    function updateConsole() {
      const el = document.getElementById('console');
      el.innerHTML = consoleLogs.slice(-30).map((log, i) =>
        `<div>[${new Date().toLocaleTimeString()}] ${log}</div>`
      ).join('');
      el.scrollTop = el.scrollHeight;
    }

    function initializeDateSelector() {
      const today = new Date();
      const startOfYear = new Date(today.getFullYear(), 0, 1);

      dateSelector = new DateRangeSelector('#date-selector');
      dateSelector.initialize({
        startDate: startOfYear,
        endDate: today,
        showPresets: true
      });

      dateSelector.onChange((range) => {
        console.log(`ğŸ“… æ—¥æœŸè®Šæ›´: ${range.startDate.toLocaleDateString()} ~ ${range.endDate.toLocaleDateString()}`);
      });

      console.log('âœ“ æ—¥æœŸç¯„åœé¸æ“‡å™¨å·²åˆå§‹åŒ–');
    }

    function initializeSliders() {
      // è¨ºç™‚é»æ•¸æ»‘å¡Š
      pointsSlider = new NumericRangeSlider('#points-slider');
      pointsSlider.initialize({
        min: 100,
        max: 2000,
        currentMin: 200,
        currentMax: 1500,
        step: 50,
        label: 'è¨ºç™‚é»æ•¸',
        showPresets: true
      });

      pointsSlider.onChange((range) => {
        console.log(`ğŸ’° è¨ºç™‚é»æ•¸: ${range.min} ~ ${range.max}`);
      });

      // æ‚£è€…å¹´é½¡æ»‘å¡Š
      ageSlider = new NumericRangeSlider('#age-slider');
      ageSlider.initialize({
        min: 0,
        max: 100,
        currentMin: 20,
        currentMax: 65,
        step: 1,
        label: 'æ‚£è€…å¹´é½¡',
        showPresets: true
      });

      ageSlider.onChange((range) => {
        console.log(`ğŸ‘¤ æ‚£è€…å¹´é½¡: ${range.min} ~ ${range.max} æ­²`);
      });

      console.log('âœ“ æ•¸å€¼ç¯„åœæ»‘å¡Šå·²åˆå§‹åŒ–');
    }

    function showDateRange() {
      const range = dateSelector.getRange();
      const output = document.getElementById('date-output');
      output.innerHTML = `
        <div class="output">
          <strong>âœ“ é¸å®šç¯„åœ:</strong><br>
          é–‹å§‹æ—¥æœŸ: ${range.startDate.toLocaleDateString()}<br>
          çµæŸæ—¥æœŸ: ${range.endDate.toLocaleDateString()}<br>
          å¤©æ•¸: ${Math.ceil((range.endDate - range.startDate) / (1000 * 60 * 60 * 24))} å¤©
        </div>
      `;
      console.log(`ğŸ“Š æ—¥æœŸç¯„åœ: ${range.startDate.toLocaleDateString()} - ${range.endDate.toLocaleDateString()}`);
    }

    function resetDateRange() {
      dateSelector.applyPreset('year');
      document.getElementById('date-output').innerHTML = '';
      console.log('ğŸ”„ æ—¥æœŸç¯„åœå·²é‡ç½®');
    }

    function showAllRanges() {
      const pointsRange = pointsSlider.getRange();
      const ageRange = ageSlider.getRange();

      const output = document.getElementById('slider-output');
      output.innerHTML = `
        <div class="output">
          <strong>âœ“ ç•¶å‰ç¯„åœ:</strong><br>
          è¨ºç™‚é»æ•¸: ${pointsRange.min} ~ ${pointsRange.max}<br>
          æ‚£è€…å¹´é½¡: ${ageRange.min} ~ ${ageRange.max} æ­²
        </div>
      `;
      console.log(`ğŸ“Š é»æ•¸: ${pointsRange.min}-${pointsRange.max}, å¹´é½¡: ${ageRange.min}-${ageRange.max}`);
    }

    function resetAllSliders() {
      pointsSlider.setRange(100, 2000);
      ageSlider.setRange(0, 100);
      document.getElementById('slider-output').innerHTML = '';
      console.log('ğŸ”„ æ‰€æœ‰æ»‘å¡Šå·²é‡ç½®');
    }

    // åˆå§‹åŒ–
    window.addEventListener('load', () => {
      console.log('ğŸš€ ç¯„åœç¯©é¸ UI æ¸¬è©¦é é¢å·²åŠ è¼‰');
      initializeDateSelector();
      initializeSliders();
    });
  </script>
</body>
</html>
